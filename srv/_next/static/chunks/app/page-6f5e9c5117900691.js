(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{309:function(e,t,s){Promise.resolve().then(s.bind(s,8212))},8212:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var i=s(7437),n=s(2265);class r{constructor(e,t,s,i,n,r,a){this.lineid=e,this.linename=t,this.routeid=s,this.finalstop=i,this.islowfloor=n,this.platform=r,this.timemark=a}}class a{constructor(e,t,s){this.postid=e,this.name=t,this.departures=s}}function l(){let[e,t]=(0,n.useState)(!0),s=(0,n.useRef)(),[l,c]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[p,h]=(0,n.useState)([]),x=async()=>{let e=await fetch("/api/departures?stopid=1455",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}),s=await e.json();h(()=>s.PostList.map(e=>new a(e.PostID,e.Name,e.Departures.map(e=>new r(e.LineId,e.LineName,e.RouteId,e.FinalStop,e.IsLowFloor,e.Platform,e.TimeMark))))),d(s.Warning),c(s.Error),s.Error&&m(s.Message),t(!1)};return(0,n.useEffect)(()=>(x(),s.current=setInterval(()=>x(),3e4),()=>{clearInterval(s.current)}),[]),(0,i.jsxs)("main",{className:"flex flex-col justify-between min-h-full bg-white text-black",children:[e&&(0,i.jsx)("button",{onClick:()=>{x(),console.log(p),console.log(o),console.log(l)},className:"relative w-[calc(100%_-24px)] my-2 mx-3 p-5 rounded-lg bg-blue-500",children:"Loading..."}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"relative w-[calc(100%_-24px)] my-2 mx-3 p-5 rounded-lg bg-red-500",children:l}),(0,i.jsx)("div",{className:"relative w-[calc(100%_-24px)] my-2 mx-3 p-5 rounded-lg bg-gray-500",children:u})]}),(0,i.jsx)("section",{className:"grid grid-cols-2",style:{direction:"rtl"},children:p.map(e=>(0,i.jsxs)("div",{className:"relative w-[calc(100%_-24px)] my-2 mx-3 p-5 rounded-lg bg-gray-200",style:{direction:"ltr"},children:[(0,i.jsx)("h2",{className:"text-3xl",children:e.name}),e.departures.map((e,t)=>(0,i.jsxs)("div",{className:"p-2 bg-white rounded-lg my-2 flex justify-between items-center text-xl",children:[(0,i.jsx)("div",{className:"px-2 bg-idsjmk-green rounded-sm text-white",children:e.linename}),(0,i.jsx)("div",{children:e.finalstop}),(0,i.jsx)("div",{children:e.timemark})]},"departure_"+e.routeid+"_"+t))]},e.postid))})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=309)}),_N_E=e.O()}]);