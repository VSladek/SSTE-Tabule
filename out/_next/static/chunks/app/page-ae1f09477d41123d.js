(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5631:function(e,t,s){Promise.resolve().then(s.bind(s,8212))},8212:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),l=s(2265);class n{constructor(e,t,s,a,l,n,r){this.lineid=e,this.linename=t,this.routeid=s,this.finalstop=a,this.islowfloor=l,this.platform=n,this.timemark=r}}class r{constructor(e,t,s){this.postid=e,this.name=t,this.departures=s}}let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:70,a=0;for(let t=0;t<e.length;t++)a=e.charCodeAt(t)+((a<<5)-a),a&=a;return"hsl(".concat(a%360,", ").concat(t,"%, ").concat(s,"%)")};function c(){let e=()=>{let e=new URLSearchParams(window.location.search);if(e.has("stopid"))return e.get("stopid");if(e.has("p"))switch(e.get("p")){case"1":break;case"2":return"1176"}return"1455"},[t,s]=(0,l.useState)(e()),[c,o]=(0,l.useState)(!0),d=(0,l.useRef)(),[m,h]=(0,l.useState)(""),[u,p]=(0,l.useState)(""),[x,f]=(0,l.useState)(""),[g,v]=(0,l.useState)([]),w=async()=>{let e=await fetch("api/departures?stopid=".concat(t),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}),s=await e.json();v(()=>s.PostList.map(e=>new r(e.PostID,e.Name,e.Departures.map(e=>new n(e.LineId,e.LineName,e.RouteId,e.FinalStop,e.IsLowFloor,e.Platform,e.TimeMark))))),p(s.Warning),h(s.Error),f(s.Message),o(!1)};return(0,l.useEffect)(()=>(w(),s(e()),d.current=setInterval(()=>w(),3e4),()=>{clearInterval(d.current)}),[]),(0,a.jsxs)("main",{className:"h-[100vh] bg-white text-black",children:[c&&(0,a.jsx)("button",{onClick:()=>{w(),console.log(g),console.log(u),console.log(m)},className:"relative w-[calc(100%_-24px)] my-2 mx-3 p-5 rounded-lg bg-blue-500",children:"Loading..."}),m&&(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsx)("div",{className:"relative w-[calc(100%_-24px)] my-2 mx-3 p-5 rounded-lg bg-yellow-500",children:u}),(0,a.jsx)("div",{className:"relative w-[calc(100%_-24px)] my-2 mx-3 p-5 rounded-lg bg-red-500",children:m}),(0,a.jsx)("div",{className:"my-2 mx-3 p-5 rounded-lg bg-gray-400 text-xl",children:x})]}),(0,a.jsx)("section",{className:"flex flex-col-reverse p-3",children:g.map(e=>(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("h2",{className:"text-8xl text-center",children:e.name}),e.departures.map((e,t)=>(0,a.jsxs)("div",{className:"p-2 bg-gray-200 rounded-lg my-2 grid grid-cols-2 items-center text-6xl",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-10 text-nowrap",children:[(0,a.jsx)("div",{className:"flex justify-center min-w-32",children:(0,a.jsx)("div",{className:"rounded-md invert text-center w-fit px-2",style:{backgroundColor:i(e.finalstop)},children:e.linename})}),(0,a.jsx)("div",{className:"text-center",style:{color:e.islowfloor?"black":"transparent"},children:"♿︎"}),(0,a.jsx)("div",{className:"text-left",children:e.finalstop})]}),(0,a.jsx)("div",{className:"place-self-end flex flex-row gap-10",children:(0,a.jsx)("div",{className:"text-right",children:e.timemark})})]},"departure_"+e.routeid+"_"+t))]},e.postid))})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5631)}),_N_E=e.O()}]);